<!DOCTYPE html>
<html lang="id">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Happy Birthday</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Georgia', 'Times New Roman', serif;
			background: linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 50%, #0a0a1a 100%);
			color: #fff;
			overflow: hidden;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.slide {
			position: absolute;
			width: 100%;
			height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: clamp(1rem, 5vw, 2rem);
			opacity: 0;
			transform: scale(0.95);
			transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1),
				transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
			pointer-events: none;
		}

		.slide.active {
			opacity: 1;
			transform: scale(1);
			pointer-events: auto;
		}

		.slide.exit {
			opacity: 0;
			transform: scale(1.05);
		}

		h1 {
			font-size: clamp(2rem, 6vw, 5rem);
			font-weight: 300;
			letter-spacing: 0.05em;
			text-align: center;
			line-height: 1.3;
			background: linear-gradient(135deg, #fff 0%, #c89fff 50%, #fff 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			animation: glow 3s ease-in-out infinite;
		}

		p {
			font-size: clamp(1rem, 2.5vw, 1.5rem);
			font-weight: 300;
			letter-spacing: 0.03em;
			text-align: center;
			line-height: 1.6;
			max-width: 90%;
			color: #e0d0f0;
			opacity: 0.9;
		}

		.small-text {
			font-size: clamp(0.85rem, 2vw, 1.1rem);
			color: #b0a0c0;
			margin-top: 1.5rem;
			opacity: 0.6;
			font-style: italic;
		}

		.cake-container {
			position: relative;
			margin: clamp(2rem, 5vh, 4rem) 0 clamp(1rem, 3vh, 2rem);
			animation: float 4s ease-in-out infinite;
		}

		.cake {
			width: clamp(180px, 35vw, 250px);
			height: clamp(160px, 30vw, 220px);
			position: relative;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: flex-end;
		}

		/* Layer paling bawah (terbesar) */
		.cake::before {
			content: '';
			position: absolute;
			bottom: 0;
			width: 100%;
			height: 45%;
			background: linear-gradient(180deg, #4a3060 0%, #2a1a3a 100%);
			border-radius: 8px;
			box-shadow: 0 8px 25px rgba(138, 43, 226, 0.3),
				0 0 40px rgba(138, 43, 226, 0.2),
				inset 0 -3px 10px rgba(0, 0, 0, 0.3);
		}

		/* Layer tengah */
		.cake::after {
			content: '';
			position: absolute;
			bottom: 45%;
			width: 75%;
			height: 35%;
			background: linear-gradient(180deg, #5a4070 0%, #3a2550 100%);
			border-radius: 6px;
			box-shadow: 0 6px 20px rgba(138, 43, 226, 0.25),
				0 0 30px rgba(138, 43, 226, 0.15),
				inset 0 -2px 8px rgba(0, 0, 0, 0.3);
			z-index: 1;
		}

		/* Layer paling atas */
		.frosting {
			position: absolute;
			top: 0;
			width: 50%;
			height: 30%;
			background: linear-gradient(180deg, #6a5080 0%, #4a3060 100%);
			border-radius: 4px;
			box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3),
				0 0 25px rgba(138, 43, 226, 0.2),
				inset 0 -2px 6px rgba(0, 0, 0, 0.3);
			z-index: 2;
		}

		/* Dekorasi cream di setiap layer - ungu terang */
		.frosting::before {
			content: '';
			position: absolute;
			top: -8px;
			left: -5%;
			right: -5%;
			height: 12px;
			background: linear-gradient(180deg, #b19cd9 0%, #9370db 100%);
			border-radius: 50% 50% 0 0;
			box-shadow: 0 2px 8px rgba(177, 156, 217, 0.6),
				0 0 20px rgba(147, 112, 219, 0.4);
		}

		/* Cream layer tengah */
		.frosting::after {
			content: '';
			position: absolute;
			bottom: -53px;
            top: 112px;
			left: -12%;
			width: 130%;
			background: linear-gradient(180deg, #b19cd9 0%, #9370db 100%);
			border-radius: 50% 50% 0 0;
			box-shadow: 0 2px 8px rgba(177, 156, 217, 0.6),
				0 0 20px rgba(147, 112, 219, 0.4);
			z-index: 1;
		}

		.candle {
			position: absolute;
			top: -45px;
			left: 50%;
			transform: translateX(-50%);
			width: 10px;
			height: 38px;
			background: linear-gradient(180deg, #ffffff 10%, #f5f5f5 50%, #e8e8e8 100%);
			border-radius: 5px 5px 0 0;
			box-shadow: 0 2px 8px rgba(255, 255, 255, 0.4),
				0 0 15px rgba(255, 255, 255, 0.3),
				inset 1px 0 2px rgba(255, 255, 255, 0.8),
				inset -1px 0 2px rgba(0, 0, 0, 0.1);
			z-index: 3;
		}

		/* Sumbu lilin */
		.candle::before {
			content: '';
			position: absolute;
			top: -3px;
			left: 50%;
			transform: translateX(-50%);
			width: 2px;
			height: 6px;
			background: linear-gradient(180deg, #333 0%, #111 100%);
			border-radius: 1px;
		}

		.flame {
			position: absolute;
			top: -20px;
			left: 50%;
			transform: translateX(-50%);
			width: 15px;
			height: 25px;
			background: radial-gradient(ellipse at center, #fff 0%, #ffdd99 30%, #ff9966 60%, transparent 100%);
			border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
			animation: flicker 1.5s ease-in-out infinite;
			filter: blur(1px);
			box-shadow: 0 0 20px rgba(255, 200, 100, 0.8);
			transition: all 0.5s ease-out;
		}

		.flame.blown {
			animation: blowOut 0.8s ease-out forwards;
		}

		@keyframes blowOut {
			0% {
				transform: translateX(-50%) scale(1);
				opacity: 1;
			}

			50% {
				transform: translateX(30px) scale(0.5, 1.5);
				opacity: 0.5;
			}

			100% {
				transform: translateX(50px) scale(0);
				opacity: 0;
			}
		}

		.wind {
			position: absolute;
			width: 100px;
			height: 40px;
			pointer-events: none;
			opacity: 0;
			left: 50%;
			top: 220px;
			transform: translate(-120%, -50%);
		}

		/* Garis utama */
		.wind::before {
			content: '';
			position: absolute;
			width: 90px;
			height: 2px;
			top: 50%;
			left: 0;
			background: linear-gradient(90deg,
					rgba(200, 159, 255, 0) 0%,
					rgba(200, 159, 255, 0.85) 45%,
					rgba(200, 159, 255, 0) 100%);
			border-radius: 2px;
			filter: blur(0.4px);
			transform-origin: left center;
		}

		/* Garis pendamping (lebih tipis & lebih lembut) */
		.wind::after {
			content: '';
			position: absolute;
			width: 60px;
			height: 1px;
			top: calc(50% + 6px);
			left: 10px;
			background: rgba(200, 159, 255, 0.4);
			filter: blur(0.5px);
			transform-origin: left center;
		}

		/* Aktif */
		.wind.active {
			opacity: 1;
		}

		.wind.active::before {
			animation: softBlowMain 0.4s ease-out forwards;
		}

		.wind.active::after {
			animation: softBlowSub 0.45s ease-out 0.05s forwards;
		}

		/* Animasi utama */
		@keyframes softBlowMain {
			0% {
				transform: translateX(-15px) scaleX(0.6);
				opacity: 0;
			}

			30% {
				opacity: 0.9;
			}

			100% {
				transform: translateX(80px) scaleX(1);
				opacity: 0;
			}
		}

		/* Animasi pendamping */
		@keyframes softBlowSub {
			0% {
				transform: translateX(-10px) scaleX(0.7);
				opacity: 0;
			}

			40% {
				opacity: 0.6;
			}

			100% {
				transform: translateX(65px) scaleX(1);
				opacity: 0;
			}
		}

		.blow-text {
			cursor: pointer;
			transition: all 0.3s ease;
			padding: clamp(0.6rem, 2vw, 0.8rem) clamp(1rem, 4vw, 1.5rem);
			border: 2px solid rgba(200, 159, 255, 0.4);
			border-radius: 30px;
			background: rgba(200, 159, 255, 0.1);
			backdrop-filter: blur(10px);
			animation: pulse 2s ease-in-out infinite;
			position: relative;
			z-index: 100;
			font-size: clamp(0.85rem, 2vw, 1.1rem);
			color: #b0a0c0;
			font-style: italic;
			font-family: 'Georgia', 'Times New Roman', serif;
			outline: none;
			margin-top: 1rem;
		}

		.blow-text:hover {
			transform: scale(1.05);
			color: #c89fff;
			border-color: rgba(200, 159, 255, 0.8);
			background: rgba(200, 159, 255, 0.2);
			box-shadow: 0 0 30px rgba(200, 159, 255, 0.5);
		}

		.blow-text:active {
			transform: scale(0.98);
		}

		.blow-text.hidden {
			opacity: 0;
			pointer-events: none;
		}

		@keyframes pulse {

			0%,
			100% {
				box-shadow: 0 0 20px rgba(200, 159, 255, 0.3);
				transform: scale(1);
			}

			50% {
				box-shadow: 0 0 40px rgba(200, 159, 255, 0.6);
				transform: scale(1.02);
			}
		}

		.sparkle {
			position: absolute;
			width: 4px;
			height: 4px;
			background: #fff;
			border-radius: 50%;
			animation: sparkle 2s ease-in-out infinite;
			box-shadow: 0 0 10px #fff;
		}

		.sparkle:nth-child(1) {
			top: 20%;
			left: 20%;
			animation-delay: 0s;
		}

		.sparkle:nth-child(2) {
			top: 40%;
			right: 15%;
			animation-delay: 0.5s;
		}

		.sparkle:nth-child(3) {
			bottom: 30%;
			left: 25%;
			animation-delay: 1s;
		}

		.sparkle:nth-child(4) {
			bottom: 20%;
			right: 20%;
			animation-delay: 1.5s;
		}

		@keyframes float {

			0%,
			100% {
				transform: translateY(0px);
			}

			50% {
				transform: translateY(-20px);
			}
		}

		@keyframes flicker {

			0%,
			100% {
				transform: translateX(-50%) scale(1);
				opacity: 1;
			}

			50% {
				transform: translateX(-50%) scale(1.1, 0.9);
				opacity: 0.8;
			}
		}

		@keyframes glow {

			0%,
			100% {
				text-shadow: 0 0 20px rgba(200, 159, 255, 0.5);
			}

			50% {
				text-shadow: 0 0 40px rgba(200, 159, 255, 0.8);
			}
		}

		@keyframes sparkle {

			0%,
			100% {
				opacity: 0;
				transform: scale(0);
			}

			50% {
				opacity: 1;
				transform: scale(1);
			}
		}

		.particles {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			pointer-events: none;
			z-index: -1;
		}

		.particle {
			position: absolute;
			width: 2px;
			height: 2px;
			background: rgba(200, 159, 255, 0.5);
			border-radius: 50%;
			animation: particleFloat 15s linear infinite;
		}

		@keyframes particleFloat {
			0% {
				transform: translateY(100vh) translateX(0);
				opacity: 0;
			}

			10% {
				opacity: 1;
			}

			90% {
				opacity: 1;
			}

			100% {
				transform: translateY(-100vh) translateX(100px);
				opacity: 0;
			}
		}

		/* SLIDE 3 STYLING */
		#slide3 {
			justify-content: center;
		}

		.gift-wrapper {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: start;
			gap: 0;
			position: relative;
		}

		.gift-container {
			position: relative;
			width: clamp(150px, 30vw, 200px);
			height: clamp(150px, 30vw, 200px);
			transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
			z-index: 10;
		}

		.gift-box {
			width: 100%;
			height: 75%;
			background: linear-gradient(135deg, #2a1a3a 0%, #1a0a2a 100%);
			border-radius: 8px;
			position: absolute;
			bottom: 0;
			box-shadow: 0 20px 60px rgba(200, 159, 255, 0.3);
			transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
		}

		.gift-bow {
			width: 40%;
			height: 25%;
			background: linear-gradient(135deg, #c89fff 0%, #a079df 100%);
			border-radius: 50%;
			position: absolute;
			top: 0;
			left: 50%;
			transform: translateX(-50%);
			box-shadow: 0 0 30px rgba(200, 159, 255, 0.6);
			transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
		}

		.gift-bow::before,
		.gift-bow::after {
			content: '';
			position: absolute;
			width: 50%;
			height: 80%;
			background: linear-gradient(135deg, #c89fff 0%, #a079df 100%);
			border-radius: 50% 50% 0 50%;
			box-shadow: 0 0 20px rgba(200, 159, 255, 0.4);
		}

		.gift-bow::before {
			left: -40%;
			top: 10%;
			transform: rotate(-45deg);
		}

		.gift-bow::after {
			right: -40%;
			top: 10%;
			transform: rotate(45deg);
		}

		.gift-ribbon {
			width: 10%;
			height: 75%;
			background: linear-gradient(90deg, #c89fff 0%, #a079df 100%);
			position: absolute;
			left: 50%;
			transform: translateX(-50%);
			bottom: 0;
			box-shadow: 0 0 20px rgba(200, 159, 255, 0.4);
			transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
		}

		.gift-ribbon::before {
			content: '';
			width: 200%;
			height: 13%;
			background: linear-gradient(90deg, #c89fff 0%, #a079df 100%);
			position: absolute;
			top: 33%;
			left: 50%;
			transform: translateX(-50%);
			box-shadow: 0 0 20px rgba(200, 159, 255, 0.4);
		}

		.gift-container.opened .gift-bow {
			transform: translateX(-50%) translateY(-100px) scale(0);
			opacity: 0;
		}

		.gift-container.opened .gift-box {
			transform: translateY(-80px) rotateX(45deg);
			opacity: 0;
		}

		.gift-container.opened .gift-ribbon {
			transform: translateX(-50%) scale(0);
			opacity: 0;
		}

		.hidden {
			opacity: 0;
			pointer-events: none;
			transition: opacity 0.6s ease;
		}

		.tap-gift-text {
			position: absolute;
			bottom: -3rem;
			left: 50%;
			transform: translateX(-50%);
		}

		.gift-content-wrapper {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			gap: clamp(1rem, 3vh, 2rem);
			opacity: 0;
			transform: scale(0);
			transition: all 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
			max-width: 90%;
		}

		.gift-content-wrapper.show {
			opacity: 1;
			transform: scale(1);
		}

		.bouquet-emoji {
			font-size: clamp(80px, 15vw, 120px);
			filter: drop-shadow(0 10px 30px rgba(200, 159, 255, 0.5));
			animation: bouquetPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards,
				bouquetFloat 3s ease-in-out 0.6s infinite;
		}

		@keyframes bouquetPop {
			0% {
				transform: scale(0) rotate(-30deg);
				opacity: 0;
			}

			100% {
				transform: scale(1) rotate(0deg);
				opacity: 1;
			}
		}

		@keyframes bouquetFloat {

			0%,
			100% {
				transform: translateY(0) rotate(0deg);
			}

			50% {
				transform: translateY(-15px) rotate(3deg);
			}
		}

		.letter-container {
			width: 100%;
			max-width: 550px;
			height: clamp(350px, 50vh, 450px);
			background: linear-gradient(135deg, #f5f0e8 0%, #e8e0d5 100%);
			border-radius: 12px;
			padding: clamp(1.5rem, 4vw, 2.5rem);
			box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6),
				inset 0 1px 0 rgba(255, 255, 255, 0.6);
			position: relative;
			overflow-y: auto;
			overflow-x: hidden;
			animation: letterSlideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
		}

		@keyframes letterSlideUp {
			0% {
				transform: translateY(30px);
				opacity: 0;
			}

			100% {
				transform: translateY(0);
				opacity: 1;
			}
		}

		.letter-container::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 600px;
			background: repeating-linear-gradient(transparent,
					transparent 28px,
					rgba(200, 159, 255, 0.1) 28px,
					rgba(200, 159, 255, 0.1) 30px);
			pointer-events: none;
			z-index: 0;
		}

		.letter-content {
			position: relative;
			z-index: 1;
		}

		.letter-content h2 {
			font-size: clamp(1.2rem, 4vw, 1.8rem);
			color: #2a1a3a;
			text-align: center;
			margin-bottom: 1.5rem;
			font-weight: 400;
			background: linear-gradient(135deg, #c89fff 0%, #6a4a8a 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.letter-content p {
			font-size: clamp(0.9rem, 2.5vw, 1.05rem);
			line-height: 1.8;
			color: #3a2a4a;
			text-align: left;
			margin-bottom: 1rem;
			font-style: italic;
			max-width: 100%;
		}

		.letter-signature {
			text-align: right;
			margin-top: 2rem;
			font-size: clamp(0.85rem, 2vw, 1rem);
			color: #6a4a8a;
			font-style: italic;
		}

		.letter-container::-webkit-scrollbar {
			width: 8px;
		}

		.letter-container::-webkit-scrollbar-track {
			background: rgba(200, 159, 255, 0.1);
			border-radius: 10px;
		}

		.letter-container::-webkit-scrollbar-thumb {
			background: linear-gradient(135deg, #c89fff 0%, #a079df 100%);
			border-radius: 10px;
		}

		.letter-container::-webkit-scrollbar-thumb:hover {
			background: linear-gradient(135deg, #a079df 0%, #8059bf 100%);
		}

		/* Confetti effect */
		.confetti {
			position: fixed;
			width: 10px;
			height: 10px;
			pointer-events: none;
			z-index: 1000;
		}

		@keyframes confettiFall {
			0% {
				transform: translateY(-100vh) rotate(0deg);
				opacity: 1;
			}

			100% {
				transform: translateY(100vh) rotate(720deg);
				opacity: 0;
			}
		}

		#slide2 .cake-container {
			animation: float 4s ease-in-out infinite, cakeGlow 2s ease-in-out infinite;
		}

		@keyframes cakeGlow {

			0%,
			100% {
				filter: drop-shadow(0 0 20px rgba(200, 159, 255, 0.3));
			}

			50% {
				filter: drop-shadow(0 0 40px rgba(200, 159, 255, 0.6));
			}
		}

		@media (max-width: 768px) {
			.letter-container {
				height: clamp(300px, 45vh, 400px);
				padding: 1.5rem 1.2rem;
			}

			.wind {
				position: absolute;
				top: 38vh;
			}

			/* Responsive frosting untuk mobile */
			.frosting::before {
				height: 10px;
				top: -6px;
			}

			.frosting::after {
				height: 8px;
				top: 80px;
			}

			.candle {
				top: -38px;
				width: 8px;
				height: 32px;
			}

			.candle::before {
				height: 5px;
				top: -2px;
			}
		}

		@media (max-height: 700px) {
			.cake-container {
				margin: 1.5rem 0 1rem;
			}

			.wind {
				position: absolute;
				top: 30vh;
			}

			.letter-container {
				height: clamp(250px, 40vh, 350px);
			}

			/* Responsive frosting untuk layar pendek */
			.frosting::before {
				height: 12px;
				top: -5px;
			}

			.frosting::after {
				height: 10px;
				bottom: -2px;
			}

			.candle {
				top: -35px;
				width: 8px;
				height: 30px;
			}

			.candle::before {
				height: 4px;
				top: -2px;
			}
		}

		/* Untuk layar sangat kecil */
		@media (max-width: 480px) {
			.frosting::before {
				height: 8px;
				top: -5px;
			}

			.wind {
				position: absolute;
				top: 37vh;
			}

			.frosting::after {
				height: 7px;
				bottom: -40px;
			}

			.candle {
				top: -32px;
				width: 7px;
				height: 28px;
			}
		}
	</style>
</head>

<body>
	<div class="particles" id="particles"></div>

	<div class="slide active" id="slide1">
		<h1>Haiii</h1>
		<p class="small-text">tap di mana ajaa</p>
	</div>

	<div class="slide" id="slide2">
		<p style="margin-bottom: 90px;">Selamat Ulang Tahun Velennn! ü•≥</p>
		<div class="cake-container">
			<div class="cake">
				<div class="frosting"></div>
				<div class="candle">
					<div class="flame" id="flame"></div>
				</div>
			</div>
			<div class="sparkle"></div>
			<div class="sparkle"></div>
			<div class="sparkle"></div>
			<div class="sparkle"></div>
		</div>
		<div class="wind" id="wind"></div>
		<button class="blow-text" id="blowText" onclick="blowCandle(event)">tiup lilinnya</button>
	</div>

	<div class="slide" id="slide3">
		<div class="gift-wrapper">
			<div style="margin-top: 200px;" class="gift-container" id="giftBox">
				<div class="gift-bow"></div>
				<div class="gift-box"></div>
				<div class="gift-ribbon"></div>
				<p style="width: 100px;" class="small-text tap-gift-text" id="tapGiftText">buka bukaa</p>
			</div>

			<div style="margin-top: -300px;" class="gift-content-wrapper" id="giftContent">
				<div class="bouquet-emoji">üíê</div>
				<div class="letter-container">
					<div class="letter-content">
						<h2>For u ‚ú®</h2>
						<p>ciee uda beda 2 tahun aja kitaa, Barakallah yaa!</p>
						<p>Semoga di umur yang baru inii makin sholehah ya velen makin lucu (kocak) makin kuat makin
							baik makin keren makin cantik eh makin sehat maksudnyaa, lemotnya berkurangg, makin sayang
							diri sendirii, teruss uangnya makin banyakk ga abis abiss, makin bahagia jugaa, diberi
							ketenangan lahir & batinn, makin semangatt kerja & olahraganyaa, sama pas itu u doain i
							punya rumah kue yang isinya coklatt sekarang i doain u punya rumahh yang di dalemnya ada
							kolam matcha latte no sugarr less ice supaya i juga bisa minta ntarr dan semogaa apa yang u
							impikann semuanya bisa tercapaiii di umur yang ke 31 ini yaa AAMIINNN</p>
						<div class="letter-signature">‚Äî dari orang keren üòé</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script>
		let current = 0;
		const slides = document.querySelectorAll('.slide');
		const total = slides.length;
		let giftOpened = false;
		let candleBlown = false;

		function createParticles() {
			const container = document.getElementById('particles');
			for (let i = 0; i < 50; i++) {
				const particle = document.createElement('div');
				particle.className = 'particle';
				particle.style.left = Math.random() * 100 + '%';
				particle.style.animationDelay = Math.random() * 15 + 's';
				particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
				container.appendChild(particle);
			}
		}

		function createConfetti() {
			const colors = ['#c89fff', '#ff79b3', '#ffcc80', '#80c7ff', '#ff9999'];
			for (let i = 0; i < 50; i++) {
				const confetti = document.createElement('div');
				confetti.className = 'confetti';
				confetti.style.left = Math.random() * 100 + '%';
				confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
				confetti.style.animation = `confettiFall ${2 + Math.random() * 2}s linear`;
				confetti.style.animationDelay = Math.random() * 0.3 + 's';
				document.body.appendChild(confetti);

				setTimeout(() => confetti.remove(), 4000);
			}
		}

		function blowCandle(e) {
			e.stopPropagation();
			if (candleBlown) return;

			const flame = document.getElementById('flame');
			const wind = document.getElementById('wind');
			const blowText = document.getElementById('blowText');

			wind.classList.add('active');
			flame.classList.add('blown');
			blowText.classList.add('hidden');
			candleBlown = true;

			setTimeout(() => {
				wind.classList.remove('active');
			}, 800);
		}

		window.blowCandle = blowCandle;

		function nextSlide(e) {
			if (e && (e.target.id === 'blowText' || e.target.closest('#blowText'))) {
				return;
			}

			if (current === 1 && !candleBlown) {
				return;
			}

			if (current === 2 && !giftOpened) {
				const giftBox = document.getElementById('giftBox');
				const giftContent = document.getElementById('giftContent');
				const tapGiftText = document.getElementById('tapGiftText');

				giftBox.classList.add('opened');
				tapGiftText.classList.add('hidden');
				giftOpened = true;

				createConfetti();

				setTimeout(() => {
					giftContent.classList.add('show');
				}, 800);

				return;
			}

			if (current < total - 1) {
				slides[current].classList.remove('active');
				slides[current].classList.add('exit');

				setTimeout(() => {
					slides[current].classList.remove('exit');
				}, 1200);

				current++;
				slides[current].classList.add('active');

				if (current === 2) {
					giftOpened = false;
				}
				if (current === 1) {
					candleBlown = false;
				}
			}
		}

		slides.forEach((slide, index) => {
			slide.addEventListener('click', (e) => {
				if (index === current && !(e.target.id === 'blowText' || e.target.closest('#blowText'))) {
					nextSlide(e);
				}
			});
		});

		createParticles();
	</script>
</body>

</html>